{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { layoutActions } from './CartLayout';\nconst cartSlice = createSlice({\n  name: \"cart-slice\",\n  initialState: {\n    items: [],\n    totalPrice: 0,\n    totalQuantity: 0\n  },\n  reducers: {\n    replaceData(state, action) {\n      state.items = action.payload.items;\n      state.totalPrice = action.payload.totalPrice;\n      state.totalQuantity = action.payload.totalQuantity;\n    },\n    addItemToCart(state, action) {\n      const info = action.payload;\n      const findItem = state.items.findIndex(item => item.id == info.id);\n      if (findItem > -1) {\n        state.totalQuantity++;\n        let updatedItem = {\n          ...info,\n          quantity: state.items[findItem].quantity + 1\n        };\n        state.items[findItem] = updatedItem;\n        state.totalPrice = state.totalPrice + state.items[findItem].price;\n      } else {\n        state.totalQuantity++;\n        state.items.push({\n          ...info,\n          quantity: 1\n        });\n        state.totalPrice = state.totalPrice + info.price;\n      }\n\n      // const UpdatedItems = [...state.items] ;\n      // if(findItem > -1){\n      //     console.log(UpdatedItems)\n      //     let updatedItem = {\n      //         ...UpdatedItems[findItem] ,\n      //         quantity : UpdatedItems[findItem].quantity + 1 \n      //     }\n\n      //     UpdatedItems[findItem] = updatedItem ;\n      // }\n\n      // else {\n      //     UpdatedItems.push({\n      //         ...action.payload,\n      //         quantity : 1\n      //     })\n      // }\n\n      // return {...state , items :UpdatedItems } ;\n    },\n    removeItemFromCart(state, action) {\n      const info = action.payload;\n      const findItem = state.items.findIndex(item => item.id == info.id);\n      if (findItem > -1) {\n        state.totalQuantity--;\n        let updatedItem = {\n          ...info,\n          quantity: state.items[findItem].quantity - 1\n        };\n        state.items[findItem] = updatedItem;\n        state.totalPrice = state.totalPrice - state.items[findItem].price;\n      }\n      if (state.items[findItem].quantity < 1) {\n        // state.totalPrice = state.totalPrice - state.items[findItem].price\n        state.items.splice(findItem, 1);\n      }\n\n      // const findItem = state.items.findIndex((item)=> item.id == action.payload.id) ;\n      // let UpdatedItems = [...state.items] ;\n\n      // if(findItem > -1){\n\n      //     let updatedItem = {\n      //         ...UpdatedItems[findItem] ,\n      //         quantity : UpdatedItems[findItem].quantity - 1 \n      //     }\n      //     UpdatedItems[findItem] = updatedItem ;\n      // }\n      // if(UpdatedItems[findItem].quantity < 1){\n      //         UpdatedItems.splice(findItem,1);\n      // }\n\n      // return {...state ,items :UpdatedItems }\n    }\n  }\n});\nexport function sendCartData(cartItems) {\n  return async dispatch => {\n    dispatch(layoutActions.notificationHandle({\n      status: 'pending',\n      title: 'Sending ...',\n      message: 'Waiting Data!'\n    }));\n    const sendData = async () => {\n      const response = await fetch('https://rest-api-90502-default-rtdb.firebaseio.com/cart.json', {\n        method: \"PUT\",\n        body: JSON.stringify(cartItems)\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to Get Data\");\n      }\n    };\n    try {\n      await sendData();\n      dispatch(layoutActions.notificationHandle({\n        status: 'success',\n        title: 'Success Process',\n        message: 'Successfully getting Data'\n      }));\n    } catch (error) {\n      dispatch(dispatch(layoutActions.notificationHandle({\n        status: 'error',\n        title: 'Error Ocurred',\n        message: 'Failed to Fetch Data'\n      })));\n    }\n  };\n}\nexport const fetchedData = () => {\n  async function getData() {\n    const response = await fetch('https://rest-api-90502-default-rtdb.firebaseio.com/cart.json');\n    const data = await response.json();\n    if (!response.ok) throw new Error('Failed To Fetch Data');\n    return data;\n  }\n  const FinalData = getData();\n};\nexport const actionsCart = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","layoutActions","cartSlice","name","initialState","items","totalPrice","totalQuantity","reducers","replaceData","state","action","payload","addItemToCart","info","findItem","findIndex","item","id","updatedItem","quantity","price","push","removeItemFromCart","splice","sendCartData","cartItems","dispatch","notificationHandle","status","title","message","sendData","response","fetch","method","body","JSON","stringify","ok","Error","error","fetchedData","getData","data","json","FinalData","actionsCart","actions","reducer"],"sources":["C:/Users/hp/Downloads/cart-Simple-redux/src/components/store/CartSlice.jsx"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport {layoutActions} from './CartLayout'\r\n\r\nconst cartSlice = createSlice({\r\n    name:\"cart-slice\" ,\r\n    initialState : { \r\n        items:[] ,\r\n        totalPrice : 0 ,\r\n        totalQuantity : 0\r\n     } ,\r\n    reducers: { \r\n\r\n        replaceData(state , action){\r\n            state.items = action.payload.items ;\r\n            state.totalPrice = action.payload.totalPrice;\r\n            state.totalQuantity = action.payload.totalQuantity ;\r\n        },\r\n\r\n        addItemToCart(state , action){\r\n            const info  = action.payload ;\r\n            const findItem = state.items.findIndex((item)=> item.id == info.id) ;\r\n            \r\n            if( findItem > -1 ){\r\n                state.totalQuantity ++ ; \r\n                let updatedItem = {\r\n                    ...info ,\r\n                    quantity : state.items[findItem].quantity + 1 \r\n                }\r\n                state.items[findItem] = updatedItem ;\r\n                state.totalPrice = state.totalPrice + state.items[findItem].price\r\n            \r\n            } else{\r\n                state.totalQuantity ++ ; \r\n                state.items.push({\r\n                    ...info ,\r\n                    quantity : 1\r\n                })\r\n                state.totalPrice = state.totalPrice + info.price\r\n            }\r\n\r\n\r\n\r\n            // const UpdatedItems = [...state.items] ;\r\n            // if(findItem > -1){\r\n            //     console.log(UpdatedItems)\r\n            //     let updatedItem = {\r\n            //         ...UpdatedItems[findItem] ,\r\n            //         quantity : UpdatedItems[findItem].quantity + 1 \r\n            //     }\r\n\r\n            //     UpdatedItems[findItem] = updatedItem ;\r\n            // }\r\n\r\n            // else {\r\n            //     UpdatedItems.push({\r\n            //         ...action.payload,\r\n            //         quantity : 1\r\n            //     })\r\n            // }\r\n\r\n            // return {...state , items :UpdatedItems } ;\r\n        } ,\r\n\r\n        removeItemFromCart(state , action){\r\n\r\n            const info  = action.payload ;\r\n            const findItem = state.items.findIndex((item)=> item.id == info.id) ;\r\n            \r\n            if( findItem > -1 ){\r\n                state.totalQuantity -- ; \r\n                let updatedItem = {\r\n                    ...info ,\r\n                    quantity : state.items[findItem].quantity - 1 \r\n                }\r\n                state.items[findItem] = updatedItem ;\r\n                state.totalPrice = state.totalPrice - state.items[findItem].price\r\n            } \r\n\r\n            if(state.items[findItem].quantity < 1){\r\n                // state.totalPrice = state.totalPrice - state.items[findItem].price\r\n                state.items.splice(findItem , 1) ;\r\n            }\r\n\r\n\r\n            \r\n            // const findItem = state.items.findIndex((item)=> item.id == action.payload.id) ;\r\n            // let UpdatedItems = [...state.items] ;\r\n\r\n            // if(findItem > -1){\r\n\r\n            //     let updatedItem = {\r\n            //         ...UpdatedItems[findItem] ,\r\n            //         quantity : UpdatedItems[findItem].quantity - 1 \r\n            //     }\r\n            //     UpdatedItems[findItem] = updatedItem ;\r\n            // }\r\n            // if(UpdatedItems[findItem].quantity < 1){\r\n            //         UpdatedItems.splice(findItem,1);\r\n            // }\r\n\r\n            // return {...state ,items :UpdatedItems }\r\n        }\r\n    }\r\n}\r\n)\r\n\r\nexport function sendCartData(cartItems){\r\n    return async (dispatch)=>{\r\n\r\n        dispatch(layoutActions.notificationHandle({\r\n            status : 'pending' ,\r\n            title : 'Sending ...' ,\r\n            message : 'Waiting Data!'\r\n        }))\r\n\r\n        \r\n        const sendData = async()=>{\r\n            const response = await fetch('https://rest-api-90502-default-rtdb.firebaseio.com/cart.json',{\r\n                method:\"PUT\",\r\n                body:JSON.stringify(cartItems)\r\n            })\r\n\r\n            if(!response.ok) {\r\n                throw new Error(\"Failed to Get Data\")\r\n            }\r\n        }\r\n\r\n            try{\r\n                await sendData();\r\n\r\n                dispatch(layoutActions.notificationHandle({\r\n                    status : 'success' ,\r\n                    title : 'Success Process' ,\r\n                    message : 'Successfully getting Data'\r\n                }))\r\n\r\n            }catch(error){\r\n                dispatch(dispatch(layoutActions.notificationHandle({\r\n                    status : 'error' ,\r\n                    title : 'Error Ocurred' ,\r\n                    message : 'Failed to Fetch Data'\r\n                })))\r\n            }\r\n    }\r\n}\r\n\r\n\r\nexport const fetchedData=()=>{\r\n\r\n    async function getData(){\r\n        const response = await fetch('https://rest-api-90502-default-rtdb.firebaseio.com/cart.json') ;\r\n        const data = await response.json() ;\r\n    \r\n        if(!response.ok) throw new Error('Failed To Fetch Data') ;\r\n    \r\n        return data ;\r\n    } \r\n    \r\n    const FinalData = getData() ;\r\n\r\n}\r\n\r\nexport const actionsCart = cartSlice.actions ;\r\n\r\nexport default cartSlice.reducer ;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}